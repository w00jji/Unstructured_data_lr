# Unstructured_data

## 자연어(영어) 처리 과정 - 1010
1) 토큰화 : 자연어 데이터 분석을 위한 작은 단위(토큰)로 분리
2) 정제 : 분석에 큰 의미가 없는 데이터 제거
3) 정규화 : 표현 방법이 다르지만 의미가 같은 단어들을 통합
4) 정수 인코딩 : 컴퓨터가 이해하기 쉽도록 자연어 데이터에 정수 인덱스를 부여

- 사용기법 
1) 토큰화 : 단어 또는 문장 단위로 토큰화
2) 정제 : 빈도 분석 후 특정 단어 빈도 수 제거 -> 특정 단어 길이 제거 -> 불용어 처리 -> 원형 추출
3) 정규화 : 소문자 처리(정규화) -> 어간 추출(정규화)


## 감성분석 - 1011
- 정규화,토큰화,정규화, 라벨링
  - 라벨링 : 빈도가 많이 나온단어부터 라벨링 - 중요, 라벨링시 0부터 라벨링 X 1부터해야함
   - 이유 : 유사도를 구하기위해 길이가 같아야하고 길이를 늘렸을 때 빈 라벨을 0으로 채워주기 위함
 
- 감성분석
  - 절차 :
    - wordnet 사용하여 단어의 의미를 파악
    - 파악 후 단어의 점수를 매김 , 양수면 "긍정" 음수면 "부정"

  - 사용기법 : sentiWordNet , Vader
    - sentiWordNet : 상세한 감정 정보 제공 , 문맥을 고려하지 않음 , 사용이 다소 복잡 , **공식적인 문서에서 유용**
    - Vader : 사용하기 간편 , 문맥 정보 반영 , **소셜 미디어 데이터에 적합** , 영어에 최적화
      
    - 영어,한국어 - 감성분석
    - OpenAI API 활용하여 감성분석

## 빈도분석 - 1014
- 사용기법 : 빈도 수 가로 막대 그래프, 워드클라우드를 활용한 시각화
  - 절차 
    - 전처리 : 길이가 2이하인 단어 제거, 명사 추출
    - 시각화 : 가로 막대그래프 , 워드클라우드
    - TF 분석 : TF, DF, IDF, TF-IDF 생성 - 간단한 라이브러리 TfidfVectorizer -> 결과 : 값이 가장 큰걸 가져옴

    - 과제 : 대구,하나은행 기사 크롤링 후 빈도 분석
    - 사용 기법 :
      - 크롤링 : 셀레니움, bs4
      - 빈도 분석 : 위와 같음
      - [링크](https://github.com/w00jji/Unstructured_data_lr/tree/main/%ED%85%8D%EC%8A%A4%ED%8A%B8_%EB%A7%88%EC%9D%B4%EB%8B%9D1014_(%EB%B9%88%EB%8F%84%EB%B6%84%EC%84%9D)/%EB%89%B4%EC%8A%A4%EA%B8%B0%EC%82%AC_%EB%B6%84%EC%84%9D)
     
## 부동산 기사 크롤링 및 텍스트 마이닝
- 절차 : 크롤링, 빈도 분석, 워드클라우드, 시각화, 감성분석(lama 3.1 활용), 분류 모델(부동산 기사 동향 파악)

- **배경**: 
  부동산 시장에 대한 관심이 여전히 높다는 점은 여러 경제 지표와 사회적 흐름을 반영하고 있습니다. 최근 금리가 상승하지만, 많은 투자자들은 부동산을 안정적인 자산으로 보고 있습니다. 대환대출과 주택담보대출 갈아타기를 통해 금융 부담을 줄이려는 움직임이 활발해지면서 이러한 경향이 더욱 뚜렷해지고 있습니다. 한국은행의 기준금리 인상에 따라 주택담보대출 이자율이 상승하고 있으며, 이는 주택 구매자나 투자자에게 부담이 될 수 있습니다. 그러나 대환 대출을 통해 기존 대출의 이자 부담을 줄이려는 수요가 증가하고 있습니다. 정부의 부동산 관련 정책이나 규제는 시장에 큰 영향을 미치며, 소비자와 투자자의 심리적 요인도 중요합니다. 이러한 요소들을 종합적으로 분석하여 부동산 기사를 스크랩하고 분석하면, 이진 분류 모델을 통해 시장의 현황을 신속하게 판단할 수 있습니다.

- **데이터 설명**:
  - **제목**: 기사 제목
  - **본문**: 기사 내용
  - **TEXT**: 제목과 본문 병합한 텍스트 데이터
  - **감성점수**: TEXT 엔티티 행의 단어별 긍정, 부정 도합 점수
  - **lama 3.1 감성 분석**: Ollama를 사용한 감성 분석 결과

- **방법론**:
  1. **데이터 수집**: Selenium과 BeautifulSoup를 활용하여 부동산 관련 뉴스를 웹에서 크롤링합니다. 동적 웹 페이지를 처리하기 위해 undetected_chromedriver를 사용합니다.
  2. **데이터 전처리**: 수집한 데이터를 정리하여 텍스트 결합, 명사 추출 등의 전처리 작업을 수행합니다. KoNLPy의 Okt 모듈을 사용하여 텍스트에서 명사를 추출합니다. 모델링을 위해 TEXT 엔티티를 TF-IDF 벡터화하고 y값을 수치화합니다.
  3. **분석 방법**: 명사 빈도 분석, 감성 분석 및 고급 머신러닝 모델(T5, Llama3.1)을 통해 텍스트 데이터를 분석합니다. AutoML을 통해 적합한 머신러닝 모델을 파악하고, LGBM을 통해 텍스트 데이터 훈련 후 감성 사전을 구축하여 뉴스 기사의 긍정, 부정, 중립을 분류합니다.
  4. **결과 시각화**: 빈도 분석 결과를 시각화하여 주요 단어를 한눈에 확인할 수 있도록 합니다. Matplotlib과 WordCloud를 활용합니다.

- **분석 과정**:
  1. 데이터 수집: 웹 크롤링을 통해 부동산 뉴스 제목과 본문을 수집합니다.
  2. 데이터 전처리: 수집한 뉴스 제목과 본문을 결합하여 하나의 텍스트 필드를 생성합니다.
  3. 빈도 분석: 추출된 명사의 빈도를 계산하고, 상위 20개 단어를 선정합니다.
  4. 감성 분석: KNU 감성 사전을 기반으로 긍정, 부정, 중립의 감성을 판단하는 사전을 구축합니다.
  5. 고급 감성 분석: OpenAI의 Llama3.1 모델을 사용하여 각 뉴스의 감성을 분석합니다.
  6. 모델 훈련 및 예측: Hugging Face의 T5 모델을 사용하여 텍스트 분류 모델을 훈련합니다.

- **결론**:
  이번 분석을 통해 부동산 현황을 파악하기 위해 빈도 분석과 감성 분석을 실시했습니다. 빈도 분석을 통해 특정 단어에 대한 관심도를 확인할 수 있었으며, 이는 부동산 시장의 주요 트렌드를 이해하는 데 유용했습니다. 감성 분석을 통해 각 뉴스 기사에 대한 긍정적 또는 부정적 반응을 신속하게 확인할 수 있었습니다.

- **모델 결과**:
  AutoML을 활용하여 LGBM 모델을 선정한 결과, F1 score가 약 84%로 만족스러운 성능을 나타냈습니다. 향후 앙상블 기법이나 하이퍼파라미터 조정을 통해 성능을 더욱 향상시킬 수 있을 것으로 기대됩니다. 

- **고찰**:
  이번 분석은 부동산 현황을 이해하는 데 기여하였으며, 향후 보다 다양한 분석 방법과 모델을 도입하여 심층적인 연구를 진행할 필요성이 있습니다.

